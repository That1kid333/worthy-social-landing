<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Worthy Social Club - Connect with Purpose</title>
    
    <!-- Link Preview Meta Tags -->
    <meta property="og:title" content="Worthy Social Club">
    <meta property="og:description" content="Join the Worthy Social Club community">
    <meta property="og:image" content="https://worthysocialclub.blob.core.windows.net/worthysocialclub/Worthy%20Social%20Logos%20(8).png">
    <meta property="og:url" content="https://worthy-social-landing.netlify.app">
    <meta property="og:type" content="website">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:type" content="image/png">
    <meta name="theme-color" content="#000000">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Worthy Social Club">
    <meta name="twitter:description" content="Join the Worthy Social Club community">
    <meta name="twitter:image" content="https://worthysocialclub.blob.core.windows.net/worthysocialclub/Worthy%20Social%20Logos%20(8).png">
    <meta name="twitter:image:alt" content="Worthy Social Club Logo">
    
    <link rel="preload" as="video" href="https://worthysocialclub.blob.core.windows.net/worthysocialclub/Atlanta.mp4" type="video/mp4">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="/dist/output.css" rel="stylesheet">
    <style>
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 8px;
        }
        .event-card {
            background-color: #2a2a2a;
            padding: 2rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            height: 220px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
        }
        .event-card.past-event:hover::before {
            content: 'PAST EVENT';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-transform: uppercase;
        }
        .event-card h4 {
            font-size: 1.75rem;
            line-height: 1.2;
            margin-bottom: 0.75rem;
        }
        .event-card p {
            font-size: 1rem;
            line-height: 1.5;
        }
        .event-card .event-description {
            margin: 0.75rem 0;
        }
        .event-card .event-meta {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #fbfbfb;
            color: #FFFFFF;
        }
        .bg-white {
            background-color: #ffffff !important;
            color: #FFFFFF;
        }
        .text-white {
            color: #FFFFFF;
        }
        .text-gray-900 {
            color: #FFFFFF;
        }
        .text-gray-600 {
            color: #888888;
        }
        .text-gray-700 {
            color: #888888;
        }
        .bg-gray-50 {
            background-color: #888888 !important;
        }
        .bg-gray-100 {
            background-color: #888888 !important;
        }
        .bg-gray-900 {
            background-color: #0F0F0F;
        }
        .hover:bg-blue-50 {
            background-color: #1F1F1F;
        }
        .hover:bg-blue-700 {
            background-color: #D4AF37;
        }
        .bg-blue-600 {
            background-color: #D4AF37;
        }
        .bg-blue-700 {
            background-color: #D4AF37;
        }
        .border-color {
            border-color: #1F1F1F;
        }
        .modal {
            background-color: #1F1F1F !important;
            color: #FFFFFF;
        }
        .modal-content {
            background-color: #1F1F1F !important;
            color: #FFFFFF;
            border: 1px solid #D4AF37;
        }
        .bg-gray-50, .bg-gray-100 {
            color: #FFFFFF !important;
        }
        .bg-gray-50 .text-gray-600, .bg-gray-100 .text-gray-600 {
            color: #CCCCCC !important;
        }
        .text-blue-600 {
            color: #D4AF37;
        }
        .text-blue-700 {
            color: #D4AF37;
        }
        .border-blue-600 {
            border-color: #D4AF37;
        }
        .hover\:bg-blue-50:hover {
            background-color: #D4AF37;
        }
        
        /* Replace all blue-related classes with gold */
        .bg-blue-600, .bg-blue-700, 
        .hover\:bg-blue-700, 
        .hover\:bg-blue-600,
        .text-blue-600, .text-blue-700,
        .border-blue-600 {
            background-color: #D4AF37 !important;
            color: #0F0F0F !important;
            border-color: #D4AF37 !important;
        }

        /* Specific button and interactive element styles */
        a#requestInvitationLink {
            background-color: #D4AF37 !important;
            color: #0F0F0F !important;
        }

        /* Modal and other blue-related elements */
        .modal-content {
            border: 1px solid #D4AF37 !important;
        }

        /* Logo styling */
        .logo {
            width: 500px;
            height: 150px;
            object-fit: contain;
            max-height: 150px;
            max-width: 500px;
            object-position: left;
        }

        /* Header and navigation styling */
        header {
            background-color: #FFFFFF !important;
            color: black !important;
            box-shadow: none !important;
            border-bottom: none !important;
        }
        header nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px !important;
            height: 125px;
            overflow: hidden;
        }
        header nav a {
            color: black !important;
            text-decoration: none;
        }
        header nav a:hover {
            color: #888888 !important;
        }
        #requestInvitationLink {
            background-color: black !important;
            color: white !important;
            padding: 10px 20px;
            border-radius: 25px;
            transition: background-color 0.3s ease;
        }
        #requestInvitationLink:hover {
            background-color: #333333 !important;
        }
        header nav .nav-links {
            display: flex;
            align-items: center;
        }

        /* Form submission button styles */
        button[type="submit"] {
            background-color: #D4AF37 !important;
            color: #0F0F0F !important;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        button[type="submit"]:hover {
            background-color: #C0A030 !important;
        }
    </style>
    <link rel="icon" type="image/png" href="favicon.png">
</head>
<body class="font-body bg-forward-background text-forward-text-primary border-color">
    <!-- Invitation Request Modal -->
    <div id="invitationModal" class="modal">
        <div class="modal-overlay" onclick="document.getElementById('invitationModal').style.display='none'"></div>
        <div class="modal-content">
            <img src="images/logo.png" alt="Worthy Social Club Logo" class="modal-logo">
            <span class="close" onclick="document.getElementById('invitationModal').style.display='none'">&times;</span>
            <h2 class="text-2xl font-bold-heading text-white mb-6 text-center">Request an Invitation</h2>
            <form id="invitationForm" class="font-regular-body">
                <div class="mb-4">
                    <label for="name" class="block text-white mb-2">Name</label>
                    <input type="text" id="name" name="name" placeholder="Your full name" required>
                </div>
                <div class="mb-4">
                    <label for="phone" class="block text-white mb-2">Phone Number</label>
                    <input type="tel" id="phone" name="phone" placeholder="Your contact number">
                </div>
                <div class="mb-4">
                    <label for="email" class="block text-white mb-2">Email Address</label>
                    <input type="email" id="email" name="email" placeholder="Your email address" required>
                </div>
                <div class="mb-4">
                    <label for="referral" class="block text-white mb-2">Who referred you?</label>
                    <input type="text" id="referral" name="referral" placeholder="Name of referral (optional)">
                </div>
                <div class="mb-4">
                    <label for="about" class="block text-white mb-2">Tell us a little about yourself</label>
                    <textarea id="about" name="about" rows="3" placeholder="Share a bit about who you are" required></textarea>
                </div>
                <div class="mb-4">
                    <label for="profession" class="block text-white mb-2">What do you do for a living?</label>
                    <input type="text" id="profession" name="profession" placeholder="Your profession or occupation">
                </div>
                <div class="mb-4">
                    <label for="skills" class="block text-white mb-2">Special Skills or Resources</label>
                    <textarea id="skills" name="skills" rows="3" placeholder="Any skills like photography, décor, cooking, event space, etc."></textarea>
                </div>
                <div class="text-center">
                    <button type="submit" class="bg-yellow-600 text-black px-6 py-3 rounded-full hover:bg-yellow-500 transition font-semibold-button">Submit Invitation Request</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Co-Host Request Modal -->
    <div id="coHostModal" class="modal">
        <div class="modal-content">
            <span class="close cursor-pointer text-2xl float-right" id="closeCoHostModal">&times;</span>
            <h2 class="text-2xl font-bold mb-4">Become a Co-Host</h2>
            <form id="coHostForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="coHostName">Full Name</label>
                    <input type="text" id="coHostName" name="name" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="coHostEmail">Email Address</label>
                    <input type="email" id="coHostEmail" name="email" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="coHostContribution">How would you like to contribute?</label>
                    <textarea id="coHostContribution" name="contribution" rows="4" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"></textarea>
                </div>
                <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">Submit Co-Host Request</button>
            </form>
        </div>
    </div>

    <main>

        <section class="relative min-h-screen w-full overflow-hidden flex items-center">
            <div class="absolute inset-0 w-full h-full z-0 overflow-hidden bg-black">
                <video 
                    id="bgVideo"
                    autoplay 
                    loop 
                    muted 
                    playsinline 
                    class="absolute top-0 left-0 w-full h-full object-cover"
                    poster="https://worthysocialclub.blob.core.windows.net/worthysocialclub/atlanta-poster.png"
                >
                    <source src="https://worthysocialclub.blob.core.windows.net/worthysocialclub/Atlanta.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <!-- Overlay -->
                <div class="absolute inset-0 bg-black opacity-50"></div>
            </div>
            <div class="absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center z-10">
                <div class="text-center text-white max-w-2xl px-6">
                    <div class="flex justify-center items-center h-full">
                        <img src="images/logo.png" alt="Worthy Social Club Logo" class="max-w-xs mx-auto">
                    </div>
                    
                    <p class="text-xl mb-4 font-semibold-tagline">People and places worthy of your time</p>
                    
                    <h3 class="text-3xl font-bold mb-4 font-bold-heading">We're club-ish.</h3>
                    
                    <div class="font-regular-body">
                        <p class="mb-4">If you call an organized calendar of fun events with cool people a "club" then yes, we're a club, but there's no secret handshake. Unless you want one, that would be kinda fun.</p>
                        
                        <p class="mb-4">Really, this is just a scheduled opportunity to enjoy life together. You'll meet some great people, you'll get to do something fun, we'll get to enjoy your company, there will probably be some good food and drinks, and life won't be so lonely. You in?</p>
                        
                        <p>We'll start workshopping those handshakes asap.</p>
                    </div>
                    
                    <div class="mt-6 flex justify-center space-x-4">
                        <a href="#upcoming-events" class="border border-white text-white px-6 py-3 rounded-full hover:bg-white hover:text-black transition font-light-italic">View upcoming events</a>
                        <a href="#" id="requestInvitationMainLink" class="border border-blue-600 text-blue-600 px-6 py-3 rounded-full hover:bg-blue-50 transition font-semibold-button">Request Invitation</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="upcoming-events" class="bg-black py-16 relative z-20">
            <div class="container mx-auto px-6 text-center">
                <h3 class="text-4xl font-bold mb-12 text-white" style="font-family: 'JosefinSans-Bold', sans-serif;">Winter/Spring 2025 Events</h3>
                <div class="mb-8">
                    <p class="text-white font-semibold-button text-center">Please follow the links through Calendly to RSVP</p>
                    <p class="text-white font-semibold-button text-center">ALL EVENTS REQUIRE AN RSVP</p>
                </div>
                <div class="max-w-6xl mx-auto">
                    <div id="events-grid" class="grid md:grid-cols-3 gap-8 mt-8">
                        <!-- Events will be loaded dynamically -->
                    </div>
                    <div class="mt-16 text-center">
                        <a href="#" id="requestInvitationLink" class="inline-block border-2 border-yellow-500 text-yellow-500 px-8 py-4 rounded-full hover:bg-yellow-500 hover:text-black transition duration-300 font-semibold-button text-lg">Become a Cohost</a>
                    </div>
                </div>

                <script>
                    function convertTo24Hour(time12h) {
                        if (!time12h) return '00:00';
                        
                        // If it's already in 24-hour format (e.g., "21:00")
                        if (time12h.match(/^\d{2}:\d{2}$/)) return time12h;
                        
                        // Handle formats like "1:30pm", "12:00pm", etc.
                        const timeStr = time12h.toLowerCase().trim();
                        const isPM = timeStr.endsWith('pm');
                        const timeOnly = timeStr.replace(/[ap]m$/, '').trim();
                        
                        let [hours, minutes] = timeOnly.split(':').map(num => parseInt(num));
                        
                        // Convert to 24-hour format
                        if (isPM && hours !== 12) hours += 12;
                        if (!isPM && hours === 12) hours = 0;
                        
                        return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
                    }

                    function isPastEvent(eventDate) {
                        const today = new Date();
                        today.setHours(0, 0, 0, 0);
                        const eventDateTime = new Date(eventDate);
                        return eventDateTime < today;
                    }

                    function sortEvents(events) {
                        return events.sort((a, b) => {
                            const dateTimeA = new Date(a.date + 'T' + convertTo24Hour(a.time));
                            const dateTimeB = new Date(b.date + 'T' + convertTo24Hour(b.time));
                            return dateTimeA - dateTimeB;
                        });
                    }

                    async function loadEvents() {
                        try {
                            const response = await fetch('/api/public/events');
                            const events = await response.json();
                            const eventsGrid = document.getElementById('events-grid');
                            const sortedEvents = sortEvents(events);
                            
                            eventsGrid.innerHTML = sortedEvents.map(event => {
                                const eventDate = new Date(event.date);
                                const formattedDate = eventDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                                
                                return `
                                    <div class="event-card group ${isPastEvent(event.date) ? 'past-event' : ''}" data-event-date="${event.date}">
                                        <div>
                                            <h4 style="font-family: 'JennaSue', cursive;">${formattedDate}: ${event.title}</h4>
                                            <p class="event-description text-white">${event.description}</p>
                                        </div>
                                        <div>
                                            <p class="event-meta text-gray-500">${event.time} @ ${event.location}</p>
                                            ${!isPastEvent(event.date) ? 
                                                `<p class="text-blue-400 mt-2 cursor-pointer hover:text-blue-300 transition duration-300" onclick="window.open('${event.calendlyLink}', '_blank')">RSVP →</p>` : ''
                                            }
                                        </div>
                                    </div>
                                `;
                            }).join('');
                        } catch (error) {
                            console.error('Error loading events:', error);
                        }
                    }

                    // Load events when the page loads
                    loadEvents();
                </script>
            </div>
        </section>
    </main>

    <footer class="bg-black text-white py-12 font-regular-body relative z-20">
        <div class="container mx-auto px-6 text-center">
            <div class="mb-8">
                <img src="images/logo.png" alt="Worthy Social Club Logo" class="mx-auto mb-4 max-w-xs">
            </div>
            <div class="space-y-4">
                <p> 2025 Worthy Social Club. All rights reserved.</p>
                <div class="flex justify-center space-x-4">
                    <a href="/privacy-policy.html" class="hover:text-yellow-500 transition">Privacy Policy</a>
                    <a href="/terms-of-service.html" class="hover:text-yellow-500 transition">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        function handleEventClick(element, url) {
            if (!element.classList.contains('past-event')) {
                window.open(url, '_blank');
            }
        }

        function checkPastEvents() {
            const now = new Date();
            document.querySelectorAll('.event-card').forEach(card => {
                const eventDateStr = card.dataset.eventDate;
                if (!eventDateStr) return;
                
                const [year, month, day] = eventDateStr.split('-').map(num => parseInt(num));
                const eventDate = new Date(year, month - 1, day);
                const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                
                if (eventDate < today) {
                    card.classList.add('past-event');
                    const link = card.getAttribute('onclick');
                    if (link) {
                        card.setAttribute('onclick', '');
                    }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Handle background video
            const video = document.getElementById('bgVideo');
            
            // Force video play on mobile
            video.play().catch(function(error) {
                console.log("Video play failed:", error);
            });

            // Handle video play on scroll/touch for mobile
            document.addEventListener('touchstart', function() {
                video.play().catch(function(error) {
                    console.log("Video play failed on touch:", error);
                });
            }, { once: true });

            // Check past events
            checkPastEvents(); // Check for past events when the page loads
            const requestInvitationMainLink = document.getElementById('requestInvitationMainLink');
            const invitationModal = document.getElementById('invitationModal');
            const closeModalButtons = invitationModal.querySelectorAll('.close, .modal-overlay');
            
            requestInvitationMainLink.addEventListener('click', (e) => {
                e.preventDefault();
                invitationModal.style.display = 'block';
            });

            // Close modal when clicking close button or overlay
            closeModalButtons.forEach(button => {
                button.addEventListener('click', () => {
                    invitationModal.style.display = 'none';
                });
            });

            // Close modal with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && invitationModal.style.display === 'block') {
                    invitationModal.style.display = 'none';
                }
            });

            const invitationForm = document.getElementById('invitationForm');
            invitationForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                // Collect form data
                const formData = new FormData(invitationForm);
                const data = Object.fromEntries(formData.entries());
                
                // Add form type
                data.formType = 'invitation';

                // Send data to webhook
                fetch('https://hook.us1.make.com/0ciymzlu3n7qgiax2kgbgshu2a5y4hfg', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                })
                .then(response => {
                    if (response.ok) {
                        alert('Your invitation request has been submitted successfully!');
                        invitationForm.reset();
                        invitationModal.style.display = 'none';
                    } else {
                        throw new Error('Submission failed');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('There was a problem submitting your request. Please try again.');
                });
            });

            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    
                    // Remove the '#' from the href before selecting
                    if (targetId && targetId.startsWith('#')) {
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            targetElement.scrollIntoView({
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });

            // Modal Open Buttons
            const coHostLink = document.getElementById('coHostLink');
            if (coHostLink) {
                coHostLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    const coHostModal = document.getElementById('coHostModal');
                    if (coHostModal) {
                        coHostModal.style.display = 'block';
                    }
                });
            }

            // Modal Close Buttons
            const closeInvitationModal = document.getElementById('closeInvitationModal');
            if (closeInvitationModal) {
                closeInvitationModal.addEventListener('click', () => {
                    const invitationModal = document.getElementById('invitationModal');
                    if (invitationModal) {
                        invitationModal.style.display = 'none';
                    }
                });
            }

            const closeCoHostModal = document.getElementById('closeCoHostModal');
            if (closeCoHostModal) {
                closeCoHostModal.addEventListener('click', () => {
                    const coHostModal = document.getElementById('coHostModal');
                    if (coHostModal) {
                        coHostModal.style.display = 'none';
                    }
                });
            }

            // Form Submission Handlers
            const coHostForm = document.getElementById('coHostForm');
            if (coHostForm) {
                coHostForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const formData = new FormData(coHostForm);
                    const data = Object.fromEntries(formData.entries());
                    
                    try {
                        const response = await fetch('https://hook.us2.make.com/u5gd84wwjuljraw57vg0j37uqiwvotzh', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(data)
                        });
                        
                        if (response.ok) {
                            alert('Thank you for your interest in co-hosting!');
                            coHostForm.reset();
                        } else {
                            alert('There was an error submitting your form. Please try again.');
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        alert('There was a network error. Please try again.');
                    }
                });
            }
        });
    </script>
</body>
</html>
